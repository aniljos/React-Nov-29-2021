(this["webpackJsonpthe-awesome-app"]=this["webpackJsonpthe-awesome-app"]||[]).push([[3],{213:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var c=n(35),r=n.n(c),o=n(42),a=n(37),s=n(38),i=n(41),u=n(40),l=n(0),d=n.n(l),p=n(43),h=n.n(p),j=(n(213),n(29)),b=n(1),f=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={currentProduct:null},c.change=function(e){var t=e.target.value,n=e.target.name,r=Object(j.a)({},c.state.currentProduct);r[n]=t,c.setState({currentProduct:r})},c.changePrice=function(e){var t=e.target.value,n=Object(j.a)({},c.state.currentProduct);n.price=t?parseFloat(t):t,c.setState({currentProduct:n})},c.save=function(){c.props.onSave&&c.props.onSave(c.state.currentProduct)},c.cancel=function(){c.props.onCancel&&c.props.onCancel("Operation cancelled")},c.state.currentProduct=c.props.product,console.log("[EditProduct] constructor"),c}return Object(s.a)(n,[{key:"componentWillUnmount",value:function(){console.log("[EditProduct] componentWillUnmount")}},{key:"render",value:function(){var e=this.state.currentProduct;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h4",{children:["Edit Product: ID ",e.id]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",{className:"form-control",name:"name",value:e.name,onChange:this.change})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Description"}),Object(b.jsx)("input",{className:"form-control",name:"description",value:e.description,onChange:this.change})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Price"}),Object(b.jsx)("input",{type:"number",className:"form-control",value:e.price,onChange:this.changePrice})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-primary",onClick:this.save,children:"Save"}),"\xa0",Object(b.jsx)("button",{className:"btn",onClick:this.cancel,children:"Cancel"})]})]})}}]),n}(l.Component),v=n(44),m=n(27),O=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={products:[],selectedProduct:null},c.editProductRef=d.a.createRef(null),c.fetch=Object(o.a)(r.a.mark((function e(){var t,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c.props.auth,n={Authorization:"Bearer ".concat(t.accessToken)},e.next=5,Object(v.trackPromise)(h.a.get(c.url,{headers:n}));case 5:o=e.sent,console.log("success",o),c.setState({products:o.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),c.delete=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.url+"/"+t,e.prev=1,o=c.props.auth,a={Authorization:"Bearer ".concat(o.accessToken)},e.next=6,Object(v.trackPromise)(h.a.delete(n,{headers:a}));case 6:e.sent,c.fetch(),alert("deleted"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),alert("failed to delete");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),c.edit=function(e){c.setState({selectedProduct:e})},c.editUpdate=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("editUpdate",t),e.prev=1,n=c.props.auth,o={Authorization:"Bearer ".concat(n.accessToken)},a=c.url+"/"+t.id,e.next=7,Object(v.trackPromise)(h.a.put(a,t,{headers:o}));case 7:e.sent,c.fetch(),c.setState({selectedProduct:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert("Failed to update");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),c.editCancel=function(e){console.log("editProductRef",c.editProductRef),console.log("editCancel",e)},c.url="http://localhost:9000/secure_products",console.log("[ListProducts] constructor"),c}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[ListProducts] componentDidMount"),this.fetch();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderProducts",value:function(){var e=this;return this.state.products.map((function(t,n){return Object(b.jsxs)("div",{"data-testid":"product",className:"product",children:[Object(b.jsxs)("p",{children:["Id: ",t.id]}),Object(b.jsxs)("p",{children:["Name: ",t.name]}),Object(b.jsxs)("p",{children:["Price: ",t.price]}),Object(b.jsxs)("p",{children:["Description: ",t.description]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){e.delete(t.id)},children:"Delete"}),"\xa0 \xa0",Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){e.edit(t)},children:"Edit"})]})]},t.id)}))}},{key:"render",value:function(){return console.log("[ListProducts] render"),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Products"}),Object(b.jsx)("div",{style:{display:"flex",flexFlow:"row wrap",justifyContent:"center"},children:this.renderProducts()}),Object(b.jsx)("div",{children:null!==this.state.selectedProduct?Object(b.jsx)(f,{ref:this.editProductRef,product:this.state.selectedProduct,onSave:this.editUpdate,onCancel:this.editCancel},this.state.selectedProduct.id):null})]})}},{key:"componentWillMount",value:function(){console.log("[ListProducts] componentWillMount")}},{key:"componentWillReceiveProps",value:function(e){console.log("[ListProducts] componentWillReceiveProps")}},{key:"componentWillUpdate",value:function(){console.log("[ListProducts] componentWillUpdate")}},{key:"componentDidUpdate",value:function(){console.log("[ListProducts] componentDidUpdate")}},{key:"componentWillUnmount",value:function(){console.log("[ListProducts] componentWillUnmount")}}]),n}(l.PureComponent);t.default=Object(m.b)((function(e){return{auth:e.auth}}))(O)}}]);
//# sourceMappingURL=3.33733632.chunk.js.map